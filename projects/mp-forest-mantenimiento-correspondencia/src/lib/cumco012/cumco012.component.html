
<div class="ui-fluid">
  <p-toast position="top-center"></p-toast>
  <p-fieldset legend="{{ varText.default.CUMCO012.titulo }}">

      <p>{{ varText.default.CUMCO012.filtro }}</p>

      <div class="ui-g">
          <div class="ui-g-12">
              <div class="ui-inputgroup">
                  <span class="ui-inputgroup-addon"><i class="pi pi-search" style="line-height: 1;"></i></span>
                  <p-autoComplete [(ngModel)]="textAutoComlpeteOrganismoConfigurar" [suggestions]="suggestionsAutoCompleteOrganismoConfigurar" (completeMethod)="search($event)"
                  (onSelect)="getTableInfo()"[dropdown]="true" [forceSelection]="true" [required]="true" placeholder="{{ varText.default.CUMCO012.filtroPlaceHolder }}"></p-autoComplete>
                  <p-button icon="pi pi-times" (click) ="onClicBorrarAutoComplete()"></p-button>
              </div>
          </div>
      </div>

      <br>
      <p class=boldParragraph>{{ varText.default.CUMCO012.tituloTabla }}</p>
      <br>

          <!-- Start Table -->
          <p-table [columns]="cols" [value]="rows"
          [paginator]="true" [rows]="5" [rowsPerPageOptions]="[5,10,20]"
          selectionMode="single" [(selection)]="selectedRow">

              <!-- Table Caption -->
              <ng-template pTemplate="caption">
                  <div class="ui-helper-clearfix menu-sup-grid">
                      <!-- Buttons -->
                      <div class="button-sup-grid">
                          <p-button label="{{ varText.default.BOTON.agregar }}" icon="pi pi-plus" [disabled]="buttonDisabled" iconPos="left" style="float:left; margin-left: 2px;" (onClick)="onClicAgregar()"></p-button>
                          <p-button label="{{ varText.default.BOTON.eliminar }}" icon="pi pi-minus" [disabled]="buttonDisabled" iconPos="left" style="float:left; margin-left: 2px;" (onClick)="onClicEliminar()"></p-button>
                          <p-button label="{{ varText.default.BOTON.guardar }}" icon="pi pi-save" [disabled]="buttonDisabled" iconPos="left" style="float:left; margin-left: 2px;" (onClick)="onGuardarColumna()"></p-button>
                      </div>
                  </div>
              </ng-template>

              <!-- Table Heardes -->
              <ng-template pTemplate="header" let-columns>
                  <tr>
                      <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                          {{col.header}}
                          <p-sortIcon [field]="col.field" ariaLabel="Activate to sort" ariaLabelDesc="Activate to sort in descending order" ariaLabelAsc="Activate to sort in ascending order"></p-sortIcon>
                      </th>
                  </tr>
              </ng-template>

              <!-- Table Content -->
              <ng-template pTemplate="body" let-row let-rowData let-columns="columns" let-rowIndex="rowIndex">
                  <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex" [ngStyle]="gteRowColorState(row)">
                      <td pEditableColumn *ngFor="let col of columns; let i = index" [attr.data-index]="i">

                          <div [ngSwitch]="i">
                              <div *ngSwitchCase="0"> {{row[col.field]}} </div>
                              <div *ngSwitchCase="1">
                                  <p-cellEditor>

                                      <ng-template pTemplate="input" >

                                         <input type="text" [(ngModel)]="row[col.field]" [maxlength]="100" [disabled]="row.state !== 'new'">

                                      </ng-template>

                                      <ng-template pTemplate="output">

                                          {{row[col.field]}}

                                      </ng-template>

                                  </p-cellEditor>
                              </div>
                              <div *ngSwitchCase="2">
                                <div class="ui-g">
                                    <div class="ui-g-12">
                                      <p-calendar  [timeOnly]="true" [(ngModel)]="row[col.field]" dataType="string" [disabled]="rowIndex!==0" (onClose)="validarHora(rowIndex)" (onFocus)="guardarHora(rowIndex)"></p-calendar>
                                    </div>
                                </div>
                              </div>
                              <div *ngSwitchCase="3">
                                <div class="ui-g">
                                    <div class="ui-g-12">
                                      <p-calendar  [timeOnly]="true" [(ngModel)]="row[col.field]" dataType="string" [disabled]="row.state !== 'new' || rowIndex !== rows.length - 1" (onFocus)="guardarHora(rowIndex)" (onClose)="validarHora(rowIndex)"></p-calendar>
                                    </div>
                                </div>
                              </div>
                              <div *ngSwitchCase="4" style="text-align: center">
                                <p-checkbox name="groupname" [(ngModel)]="row[col.field]" binary="true"></p-checkbox>
                              </div>

                          </div>

                      </td>
                  </tr>
              </ng-template>
          </p-table>
          <!-- End Table -->



  </p-fieldset>
</div>
